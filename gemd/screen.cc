#include "connectionmgr.h"
#include "screen.h"
#include "ui_screen.h"

/*****************************************************************************\
|* Class constructor
\*****************************************************************************/
Screen::Screen(QWidget *parent)
	   :QMainWindow(parent)
	   ,_ui(new Ui::Screen)
	{
	/*************************************************************************\
	|* Create the UI
	\*************************************************************************/
	_ui->setupUi(this);

	/*************************************************************************\
	|* Start the frame-update timer going
	\*************************************************************************/
	connect(&_cron, &QTimer::timeout,
			this,
			QOverload<>::of(&Screen::doFrameUpdate));
	_cron.start(10);

	/*************************************************************************\
	|* Start the connection manager to listen for clients
	\*************************************************************************/
	_conmgr = new ConnectionMgr();
	_conmgr->start();
	}

/*****************************************************************************\
|* Class destructor
\*****************************************************************************/
Screen::~Screen()
	{
	delete _ui;
	}


/*****************************************************************************\
|* Update the frame
\*****************************************************************************/
void Screen::doFrameUpdate(void)
	{
	_ui->centralwidget->update();
	}
