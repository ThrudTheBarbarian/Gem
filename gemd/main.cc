#include "screen.h"
#include "vdi.h"

#include <QApplication>

/*****************************************************************************\
|* Application entry point
\*****************************************************************************/
int main(int argc, char *argv[])
	{
	QApplication a(argc, argv);

	/*************************************************************************\
	|* Create the main window
	\*************************************************************************/
	Screen *w = new Screen();
	w->show();

	VDI& vdi = VDI::sharedInstance();
	vdi.setScreen(w);

	/*************************************************************************\
	|* Set the system root dir into the VDI
	\*************************************************************************/
	vdi.setRootDir("/usr/local/atari");

	/*************************************************************************\
	|* Open the physical workstation
	\*************************************************************************/
	int16_t workIn[16];
	int16_t handle;
	int16_t workOut[58];

	for (int i=0; i<16; i++)
		workIn[i] = -1;
	workIn[0] = 1;

	vdi.v_opnwk(workIn, &handle, workOut);

	/*************************************************************************\
	|* Run the app
	\*************************************************************************/
	return a.exec();
	}
